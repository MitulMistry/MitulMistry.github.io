<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Mitul Mistry, Full-Stack Developer &#8211; Mitul Mistry - Tech Blog</title>
<meta name="description" content="The technical blog of Mitul Mistry.">
<meta name="keywords" content="Jekyll, theme, themes, responsive, blog, modern">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@mmystic">
<meta name="twitter:creator" content="@mmystic">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Mitul Mistry, Full-Stack Developer">
<meta property="og:description" content="The technical blog of Mitul Mistry.">
<meta property="og:url" content="/page2/">
<meta property="og:site_name" content="Mitul Mistry - Tech Blog">
<meta property="og:image" content="/images/images/logo_mm2.png">





<link rel="canonical" href="/page2/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Mitul Mistry - Tech Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"/>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="/assets/css/jquery.mmenu.all.css">
<link rel="stylesheet" href="/assets/css/jquery.floating-social-share.min.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script type="text/javascript" src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">




</head>

<body id="post-index">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->



<div class="header-menu header-menu-top">
    <ul class="header-item-container">
      <li class="header-item-title header-toggle "><a href="#menu"><h2><i class="fa fa-bars"></i></h2></a></li>
      <li class="header-item-title">
        <a href="/">
          
            <img class="logo" src="/images/logo_mm2.png" alt="Mitul Mistry - Tech Blog">
          
          <a href="/" class="title"> Mitul Mistry - Tech Blog</a>
        </a>
      </li>
      
        
        

        
          <li class="header-item "><a href="/categories"><h3>Categories</h3></a>
            <ul class="header-submenu">
              
                
                  <li class="sub-item"><a href="/categories/#angular">angular</a></li>
              
                
                  <li class="sub-item"><a href="/categories/#general">general</a></li>
              
                
                  <li class="sub-item"><a href="/categories/#javascript">javascript</a></li>
              
                
                  <li class="sub-item"><a href="/categories/#rails">rails</a></li>
              
                
                  <li class="sub-item"><a href="/categories/#ruby">ruby</a></li>
              
                
                  <li class="sub-item"><a href="/categories/#sinatra">sinatra</a></li>
              
            </ul>
          </li>
        
      
        
        

        
            
                <li class="header-item "><a href="/about"><h3>About</h3></a></li>
            
        
      
        
        

        
            
                <li class="header-item "><a href="/"><h3>Home</h3></a></li>
            
        
      
      <li class="header-item"><a href="/search"><h3><i class="fa fa-search"></i></h3></a></li>
    </ul>
  </div>
<div class="entry-header">
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Mitul Mistry, Full-Stack Developer</h1>
      
        <h2><span class="entry-date"><time>&nbsp;</time></span></h2>
      

      
          <p class="entry-reading-time">
            &nbsp;
          </p><!-- /.entry-reading-time -->
      
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->


<nav id="menu" style="display: none">
  <ul>
    
      
        <li><a href="/"><h3>Home</h3></a></li>
      
    
      
        <li><a href="/about"><h3>About</h3></a></li>
      
    
      
        <li><a href="/categories"><h3>Categories</h3></a>
          <ul>
            
              
                <li><a href="/categories/#angular">angular</a></li>
            
              
                <li><a href="/categories/#general">general</a></li>
            
              
                <li><a href="/categories/#javascript">javascript</a></li>
            
              
                <li><a href="/categories/#rails">rails</a></li>
            
              
                <li><a href="/categories/#ruby">ruby</a></li>
            
              
                <li><a href="/categories/#sinatra">sinatra</a></li>
            
          </ul>
        </li>
      
    
  </ul>
</nav>


  <a href="https://twitter.com/mmystic" class="btn btn-info button-twitter" data-show-count="false" data-size="large"><i class="fa fa-twitter"></i> <span> | Follow @mmystic</span></a>



<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2016-05-19T17:50:00-05:00"><a href="/general/github-remotes/">May 19, 2016</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Mitul Mistry">Mitul Mistry</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/general/github-remotes/" rel="bookmark" title="Github Remotes" itemprop="url">Github Remotes</a></h1>
    
  </header>
  <div class="entry-content">
    
      <p>Earlier in my education when I was coding in <code>C++</code>, I was using <code>Subversion</code> for version control (specifically <a href="https://tortoisesvn.net">TortoiseSVN</a>). <code>SVN</code> worked well enough, and in class we were able to share code for the different projects we were working on effectively. But since then, for better or worse, the world has moved on to <code>Git</code>. You can read about the differences on countless websites, like <a href="http://stackoverflow.com/questions/871/why-is-git-better-than-subversion">here</a>, so I won’t get into it.</p>

<p>For most of my efforts learning web development, I’ve been using <code>Github</code>. It’s the go-to destination for uploading, revisioning, and sharing code. A <code>remote</code> on <code>Github</code> is just a repository stored on their servers. You code locally on your machine - or your cloud IDE - and push code from your local repo to your <code>remote</code>. Because I’ve been coding in multiple development environments, this has made keeping code consistent relatively easy.</p>

<p>Earlier when I was using SVN, I didn’t create multiple branches to develop different feature sets without breaking the master, something I try to do now when using <code>Git</code>. I’ve come to find that both systems offer great functionality, but your own practices for managing your code will ultimately make the most difference.</p>

<p>You can take a look at my repos <a href="https://github.com/MitulMistry">here on Github.</a></p>


    
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2016-05-12T18:30:00-05:00"><a href="/general/learning-development/">May 12, 2016</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Mitul Mistry">Mitul Mistry</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/general/learning-development/" rel="bookmark" title="Why I decided to learn software development" itemprop="url">Why I decided to learn software development</a></h1>
    
  </header>
  <div class="entry-content">
    
      <p>Making the decision to learn a hugely difficult skillset is not something to be taken lightly. This is especially true when it requires immense technical knowledge. So deciding to make a commitment to software development, for me, was a big deal.</p>

<p>Previously, I had been working as an artist and designer. I loved art, but found the business side of creative work to be punishing and contrary to what made me passionate about art in the first place. As I spent years doing freelance jobs and checking job listings, the reality of the market eventually became clear. Artists were rarely in demand, but there were always openings for programmers.</p>

<p>Software developers create products and facillitate services in ways that directly create value for users and employers. In contrast, the work that artists and designers do will always be more limited. In order to be relevant, you need skills that can actually solve people’s problems, and art just wasn’t enough of an answer.</p>

<p>I had programmed before in the past - dealing with languages like <code>Visual Basic</code>, <code>Java</code>, and <code>C++</code>. I had enjoyed being able to create functional, interactive products, and solving problems in logical, algorithmic ways. It offered me a way to create more value for others and at a certain point, it became obvious that in order to achieve my goals, I needed to switch tracks.</p>

<p>Since making that decision, I’ve made huge progress learning <code>Ruby</code>, <code>Rails</code>, <code>ActiveRecord</code>, <code>JavaScript</code>, and <code>Angular</code> as well. In a short period of time, I’ve developed a much more marketable skillset and I know that I’ll now be able to make more of an impact with what I’ve learned.</p>

    
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2016-04-22T08:00:00-05:00"><a href="/ruby/rails/rails-project/">April 22, 2016</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Mitul Mistry">Mitul Mistry</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~5 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/ruby/rails/rails-project/" rel="bookmark" title="Rails Project - Storyplan" itemprop="url">Rails Project - Storyplan</a></h1>
    
  </header>
  <div class="entry-content">
    
      <p>Making a Rails application is hard. There are so many components, considerations, and features to be dealt with that the process can quickly become complicated and overwhelming, especially when you’re just starting out as a developer. For my first full-fledged Rails project, I’ll give an overview on how I broke down the process and attempted to build out the application one piece at a time.</p>

<p>The application is tentatively titled Storyplan and is intended as a tool to help writers plot out stories. Writing a story often requires a great deal of structure, planning, and constituent components, and I wanted to create a website that would make it easier to build and keep track of everything.</p>

<p><strong>Models</strong></p>

<p>I started by mapping out the models and migrations. Using the <code>rails generate resource</code> command, you can use Rails to generate a model, database migration for that model, and a controller, and I used it to get a head start. My models were as follows:</p>

<ul>
  <li><code>User</code> - Generated using the Devise gem for authentication.</li>
  <li><code>Story</code> - Belongs to a <code>User</code>.</li>
  <li><code>Chapter</code> - Belongs to a <code>Story</code>.</li>
  <li><code>Character</code> - Has many <code>Chapters</code> through a join table and vice versa, belongs to a <code>User</code>.</li>
  <li><code>Audience</code> - Has many <code>Stories</code> through a join table and vice versa.</li>
  <li><code>Genre</code> - Has many <code>Stories</code> through a join table and vice versa.</li>
  <li><code>Comment</code> - Belongs to both a <code>User</code> and a <code>Story</code>.</li>
</ul>

<p>With these models, I was able to set up the associations necessary to do things like show all the <code>Stories</code> of a <code>User</code> or all the <code>Characters</code> in a <code>Story</code>. This also makes it easier for a user to explore the different connections of a writer’s work.</p>

<p>These models have a variety of validations to ensure bad data isn’t entered into the system, as well as class and instance methods to give the models additional functionality beyond being mere data containers.</p>

<p><em>The <code>Story</code> model:</em></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Story</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">belongs_to</span> <span class="ss">:user</span>
  <span class="n">has_many</span> <span class="ss">:story_genres</span>
  <span class="n">has_many</span> <span class="ss">:genres</span><span class="p">,</span> <span class="o">-&gt;</span> <span class="p">{</span> <span class="n">distinct</span> <span class="p">},</span> <span class="ss">through: :story_genres</span>
  <span class="n">has_many</span> <span class="ss">:story_audiences</span>
  <span class="n">has_many</span> <span class="ss">:audiences</span><span class="p">,</span> <span class="ss">through: :story_audiences</span>
  <span class="n">has_many</span> <span class="ss">:chapters</span><span class="p">,</span> <span class="ss">dependent: :destroy</span> <span class="c1">#destroys all chapters belonging to it when the story is destroyed</span>
  <span class="n">has_many</span> <span class="ss">:characters</span><span class="p">,</span> <span class="ss">through: :chapters</span>
  <span class="n">has_many</span> <span class="ss">:comments</span>

  <span class="n">validates</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span>
  <span class="n">validates</span> <span class="ss">:user_id</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span>
  <span class="n">validates</span> <span class="ss">:target_word_count</span><span class="p">,</span> <span class="ss">numericality: </span><span class="p">{</span> <span class="ss">only_integer: </span><span class="kp">true</span> <span class="p">},</span> <span class="ss">allow_blank: </span><span class="kp">true</span>
  <span class="n">validates</span> <span class="ss">:overview</span><span class="p">,</span> <span class="ss">length: </span><span class="p">{</span> <span class="ss">maximum: </span><span class="mi">4000</span> <span class="p">}</span>

  <span class="kp">extend</span> <span class="no">ClassOrderable</span>

  <span class="k">def</span> <span class="nf">recent_comments</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">comments</span><span class="p">.</span><span class="nf">order</span><span class="p">(</span><span class="s1">'created_at DESC'</span><span class="p">).</span><span class="nf">last</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure>

<p><strong>Routes and Controllers</strong></p>

<p>Unlike Sinatra, Rails has a separate router from its controllers and uses it to map the routes to actions in those controllers. My routes were mostly resources for the above mentioned models, with a few nested resources to do things like the find all the <code>Characters</code> of a particular <code>User</code>.</p>

<p><em><a href="https://github.com/MitulMistry/rails-storyplan/blob/master/config/routes.rb">See the routes file here.</a></em></p>

<p>As far as controllers are concerned, I used one controller per model with a few miscellaneous controllers thrown in as well to handle other tasks. This is basically a CRUD (Create, Read, Update, Delete) application, so many of the controllers handle similar tasks. So for example, the <code>Stories</code> controller handles serving all the stories for the stories index, showing a particular story, serving a form for a new story or editing an old one, processing the creation and update of a story based on input from the form, and destroying a story as well. These correspond to <a href="http://guides.rubyonrails.org/routing.html">RESTful routes</a> (Representational State Transfer): Index, Show, New, Create, Edit, Update, Destroy. This is simply a paradigm to keep things consistent across different web applications and is an example of Rails’s philosophy of convention over configuration.</p>

<p>There are other levels of complexity involved, such as authorization (making sure the user creating or updating a story has permission to do so) or white-listing the data received (using <a href="http://edgeguides.rubyonrails.org/action_controller_overview.html#strong-parameters">strong parameters</a>) from the form so no improper data is forcibly entered.</p>

<p><em><a href="https://github.com/MitulMistry/rails-storyplan/blob/master/app/controllers/stories_controller.rb">See the story controller here.</a></em></p>

<p><strong>Views</strong></p>

<p>For the front end, I used the <a href="https://github.com/twbs/bootstrap-sass">Bootstrap-Sass</a> gem for Rails. It has a very generic look to it, but for now it works to help it look presentable.</p>

<p>The views use a variety of partials to make the display code reusable. For example, for each model, there is a partial that creates a sort of visual card for it that includes pertinent information. I then use a grid system to display collections of that model.</p>

<p><em>Code for the story card partial:</em></p>

<figure class="highlight"><pre><code class="language-erb" data-lang="erb"><span class="cp">&lt;%</span> <span class="n">story</span> <span class="o">=</span> <span class="n">item</span> <span class="k">unless</span> <span class="n">story</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-sm-12 col-md-4"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"thumbnail"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"caption"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h3&gt;</span><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">story</span><span class="p">.</span><span class="nf">name</span><span class="p">,</span> <span class="n">story</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h3&gt;</span>
      <span class="nt">&lt;p&gt;&lt;strong&gt;</span>Written by:<span class="nt">&lt;/strong&gt;</span> <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">story</span><span class="p">.</span><span class="nf">user</span><span class="p">.</span><span class="nf">username</span><span class="p">,</span> <span class="n">writer_path</span><span class="p">(</span><span class="n">story</span><span class="p">.</span><span class="nf">user</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;p&gt;&lt;strong&gt;</span>Overview: <span class="nt">&lt;/strong&gt;</span><span class="cp">&lt;%=</span> <span class="n">story_truncated_overview</span><span class="p">(</span><span class="n">story</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;p&gt;&lt;strong&gt;</span>Target word count:<span class="nt">&lt;/strong&gt;</span> <span class="cp">&lt;%=</span> <span class="n">story</span><span class="p">.</span><span class="nf">target_word_count</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
      <span class="cp">&lt;%</span> <span class="k">if</span> <span class="o">!</span><span class="n">story</span><span class="p">.</span><span class="nf">audiences</span><span class="p">.</span><span class="nf">empty?</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;p&gt;&lt;strong&gt;</span>Target audience:<span class="nt">&lt;/strong&gt;</span>
        <span class="cp">&lt;%</span> <span class="n">story</span><span class="p">.</span><span class="nf">audiences</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">audience</span><span class="o">|</span> <span class="cp">%&gt;</span>
          <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">audience</span><span class="p">.</span><span class="nf">name</span><span class="p">,</span> <span class="n">audience</span><span class="p">,</span> <span class="ss">class: </span><span class="s2">"label label-warning"</span> <span class="cp">%&gt;</span>
        <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/p&gt;</span>
      <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
      <span class="cp">&lt;%</span> <span class="k">if</span> <span class="o">!</span><span class="n">story</span><span class="p">.</span><span class="nf">genres</span><span class="p">.</span><span class="nf">empty?</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;p&gt;&lt;strong&gt;</span>Genres:<span class="nt">&lt;/strong&gt;</span>
        <span class="cp">&lt;%</span> <span class="n">story</span><span class="p">.</span><span class="nf">genres</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">genre</span><span class="o">|</span> <span class="cp">%&gt;</span>
          <span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="n">genre</span><span class="p">.</span><span class="nf">name</span><span class="p">,</span> <span class="n">genre</span><span class="p">,</span> <span class="ss">class: </span><span class="s2">"label label-primary"</span> <span class="cp">%&gt;</span>
        <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
      <span class="nt">&lt;/p&gt;</span>
      <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span></code></pre></figure>

<p>So when you go to the stories index page, it displays a grid of stories that simply repeat that model partial with new information from each collection item.</p>

<p><strong>Authentication</strong></p>

<p>Setting up a secure login/logout system can be challenging considering the number of security threats out there. You can roll your own authentication using <a href="https://github.com/codahale/bcrypt-ruby">bcrypt</a> to securely store password hashes, but I wanted something with more functionality built in. That’s why I used the <a href="https://github.com/plataformatec/devise">Devise</a> gem which provides for the creation of its own <code>User</code> model and gives you additional tools like email confirmation should you desire them. Most importantly, it’s battle tested and commonly used to provide secure authentication for Rails applications.</p>

<p>In addition, I used Devise to provide OAuth authentication for Facebook, so you can securely sign in with a Facebook account as well.</p>

<p><strong>Conclusion</strong></p>

<p>Overall, this is just a small overview of what turned out to be a relatively complex project. There’s a lot more functionality I’d like to build eventually to make this more of a viable tool for writers, including building more of a front end, but for now it serves its purpose.</p>

<p>You can find the source code for this project <a href="https://github.com/MitulMistry/rails-storyplan">here on Github.</a></p>


    
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2016-02-24T10:00:00-06:00"><a href="/ruby/sinatra/sinatra-project/">February 24, 2016</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Mitul Mistry">Mitul Mistry</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~2 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/ruby/sinatra/sinatra-project/" rel="bookmark" title="Sinatra Project - Simple Blog" itemprop="url">Sinatra Project - Simple Blog</a></h1>
    
  </header>
  <div class="entry-content">
    
      <p>After learning the basics of Ruby and ORMs, I’ve been working on a project leveraging the Sinatra development framework. Along with Activerecord, I’ve used it to build a simple blogging application and I will describe the process of developing it here.</p>

<p>The project uses basic Model View Controller architecture. It has a few simple models that interact with various routes in the controller which then composes and serves the different blog pages through the views.</p>

<p><strong>Models:</strong></p>

<p>The first thing I worked on were the models that would represent the data necessary for the blog to work using Activerecord. This includes <code>Users</code> which would write and edit <code>Posts</code>, which would in turn have <code>Tags</code>. In addition, I used the model <code>PostTags</code> as well, but only as an intermediary for a join table to connect <code>Posts</code> and <code>Tags</code>. This was necessary because a <code>Post</code> has many <code>Tags</code>, and a <code>Tag</code> has many <code>Posts</code>, and any time there’s a mutual ‘has many’ relationship between models, a join table is needed.</p>

<p>These associations provide a useful way to list different types of <code>Posts</code>. All <code>Posts</code> belong to a <code>User</code>, so you can easily list all of a <code>User</code>’s <code>Posts</code>, or all of a <code>Tag</code>’s <code>Posts</code> as well. Providing an easy way to organize information is critical to building a successful application, and ActiveRecord provides ample ways of doing just that.</p>

<p><em>The <code>Post</code> model code:</em></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Post</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">belongs_to</span> <span class="ss">:user</span>
  <span class="n">has_many</span> <span class="ss">:post_tags</span>
  <span class="n">has_many</span> <span class="ss">:tags</span><span class="p">,</span> <span class="ss">through: :post_tags</span>

  <span class="kp">extend</span> <span class="no">FindBySlug</span>

  <span class="k">def</span> <span class="nf">slug</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">title</span><span class="p">.</span><span class="nf">downcase</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="s2">" "</span><span class="p">,</span> <span class="s2">"-"</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">readable_date</span>
    <span class="nb">self</span><span class="p">.</span><span class="nf">created_at</span><span class="p">.</span><span class="nf">strftime</span><span class="p">(</span><span class="s2">"%b %d, %Y"</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure>

<p><strong>Controllers:</strong></p>

<p>Unlike a framework like Rails, Sinatra has a unified router and controller. I used a separate controller for each model which helped organize all the different routes and actions. The <code>Users</code> controller focuses on signing up and logging in <code>Users</code>. The <code>Posts</code> controller deals with the majority of the application’s functionality, namely the creation, editting, and deletion of <code>Posts</code> as well as <code>Tags</code> (since <code>Tags</code> are created in the same page as <code>Posts</code>). Finally, the <code>Tags</code> and application  controllers focus on a few utility tasks. As a whole, the controllers work together to facilitate the functionality of the website and process all the data.</p>

<p><em>An route/action to render the new post creation form:</em></p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">get</span> <span class="s1">'/posts/new'</span> <span class="k">do</span>
  <span class="k">if</span> <span class="n">logged_in?</span>
    <span class="vi">@tags</span> <span class="o">=</span> <span class="no">Tag</span><span class="p">.</span><span class="nf">all</span>
    <span class="n">erb</span> <span class="ss">:'posts/new'</span>
  <span class="k">else</span>
    <span class="n">redirect</span> <span class="n">to</span> <span class="s1">'/users/login'</span>
  <span class="k">end</span>
<span class="k">end</span></code></pre></figure>

<p><strong>Views:</strong></p>

<p>Just like Rails, Sinatra uses <code>ERB</code> files (Embedded Ruby) to dynamically generate html web pages and serve requested content. The views correspond to the routes/actions in the associated controllers, so there are views for showing a user page, displaying a login form, and so on. Using Bootstrap for basic frontend styling helps make the application look at least palatable (as opposed to hideous unstyled html). It may be a bit superficial, but it helps the application look like a complete thought.</p>

<p><em>The ERB code to display all the posts for a tag:</em></p>

<figure class="highlight"><pre><code class="language-erb" data-lang="erb"><span class="nt">&lt;h2&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@tag</span><span class="p">.</span><span class="nf">name</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h2&gt;</span>
<span class="cp">&lt;%</span> <span class="vi">@tag</span><span class="p">.</span><span class="nf">posts</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">post</span><span class="o">|</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;h3&gt;&lt;a</span> <span class="na">href=</span><span class="s">"/posts/</span><span class="cp">&lt;%=</span> <span class="n">post</span><span class="p">.</span><span class="nf">slug</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">&lt;%=</span> <span class="n">post</span><span class="p">.</span><span class="nf">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/a&gt;&lt;/h3&gt;</span>
  <span class="nt">&lt;h4&gt;</span>By: <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/users/</span><span class="cp">&lt;%=</span> <span class="n">post</span><span class="p">.</span><span class="nf">user</span><span class="p">.</span><span class="nf">slug</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">&lt;%=</span> <span class="n">post</span><span class="p">.</span><span class="nf">user</span><span class="p">.</span><span class="nf">username</span> <span class="cp">%&gt;</span><span class="nt">&lt;/a&gt;&lt;/h4&gt;</span>
  <span class="nt">&lt;p&gt;&lt;strong&gt;</span><span class="cp">&lt;%=</span> <span class="n">post</span><span class="p">.</span><span class="nf">readable_date</span> <span class="cp">%&gt;</span><span class="nt">&lt;/strong&gt;&lt;/p&gt;</span>
  <span class="nt">&lt;p&gt;</span><span class="cp">&lt;%=</span> <span class="n">post</span><span class="p">.</span><span class="nf">content</span> <span class="cp">%&gt;</span><span class="nt">&lt;/p&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span></code></pre></figure>

<p>In conclusion, the project took longer than I expected due to the necessary refactoring to deal with things like processing the form data during post creation and editting as well all the individual gears necessary for even a simple web project like this involving a back end. It was certainly an educational experience and a good step towards learning to build professional grade applications.</p>

<p>You can find the source code for this project <a href="https://github.com/MitulMistry/sinatra-simple-blog">here on Github.</a></p>


    
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2016-01-13T16:20:00-06:00"><a href="/ruby/steam-cli-gem/">January 13, 2016</a></time></span><span class="author vcard"><span class="fn"><a href="/about/" title="About Mitul Mistry">Mitul Mistry</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
        Reading time ~3 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="/ruby/steam-cli-gem/" rel="bookmark" title="Steam Top Sellers CLI Gem" itemprop="url">Steam Top Sellers CLI Gem</a></h1>
    
  </header>
  <div class="entry-content">
    
      <p>In my process of learning Ruby, I’ve been working on a CLI gem that I’ll discuss here. My goal was to create a command line interface that could retrieve a list of the currently top selling games at the <a href="http://store.steampowered.com/">Steam Store</a>. Upon retrieving the list, the user would then be able to select a game and get more detailed information.</p>

<p>The original intention was to organize the project through three classes: a <code>Scraper</code>, <code>Game</code>, and <code>CLI</code>. The Scraper would be responsible for scraping the data from the Steam website. The <code>Game</code> class would be used to instantiate objects for each game based on data retrieved by the <code>Scraper</code>. The <code>CLI</code> would then be used to tie the other classes together and create an interface for the user to interact with this data. In execution, most of this would go according to plan, but there would be some changes necessary.</p>

<p>I initially used Nokogiri for the <code>Scraper</code> class, then manually navigated through the CSS selectors on the Steam Store frontpage as well as the individual game pages. It was a tedious process, but worked well enough to acquire the necessary data. However, two major roadblocks soon arose:</p>

<p>1) For certain games, the Steam Store would put up an age verification page before allowing the user to continue to the game page, and when using Open-URI to access the page, it would be blocked. I looked into ways of getting around the age verification and it involved creating a cookie, but that was out of scope of what I wanted to accomplish with the project.</p>

<p>2) As soon as I finished the <code>Scraper</code> methods, the Steam Store changed its entire website and CSS structure for its holiday sale, and rewriting the methods temporarily only to revert to the old methods when the sale was over seemed tedious and inefficient.</p>

<p>So after doing some research, I was able to find a better way: leveraging the Steam Storefront API. I created a new class, <code>SteamAPIHandler</code>, to acquire the JSON data and parse it, using the data to create <code>Game</code> objects that could then interact with the <code>CLI</code>. This allowed me access to a much larger amount of data and proved to be much more efficient as well. For example, here’s an old <code>Scraper</code> method:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">scrape_top_sellers</span><span class="p">(</span><span class="n">store_url</span><span class="p">)</span>
  <span class="n">return_array</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1">#empty array that will contain the game hashes to return at the end of the method</span>

  <span class="c1">#OPEN URL</span>
  <span class="n">doc</span> <span class="o">=</span> <span class="no">Nokogiri</span><span class="o">::</span><span class="no">HTML</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">store_url</span><span class="p">))</span> <span class="c1">#uses open-uri to open the url, then uses Nokogiri to parse in the html which we will then use to scrape data</span>

  <span class="c1">#PARSE PAGE FOR DATA</span>
  <span class="n">doc</span><span class="p">.</span><span class="nf">css</span><span class="p">(</span><span class="s2">"div.tab_content#tab_topsellers_content div.tab_item"</span><span class="p">).</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span> <span class="c1">#iterates over each game listing on the site, and gets name, location, and url</span>
    <span class="n">return_array</span> <span class="o">&lt;&lt;</span> <span class="p">{</span> <span class="c1">#pushes a hash of game data onto the array</span>
      <span class="ss">title: </span><span class="n">item</span><span class="p">.</span><span class="nf">css</span><span class="p">(</span><span class="s2">"div.tab_item_name"</span><span class="p">).</span><span class="nf">text</span><span class="p">,</span> <span class="c1">#uses css to select the appropriate data</span>
      <span class="ss">price: </span><span class="n">item</span><span class="p">.</span><span class="nf">css</span><span class="p">(</span><span class="s2">"div.discount_final_price"</span><span class="p">).</span><span class="nf">text</span><span class="p">,</span>
      <span class="ss">genres: </span><span class="n">item</span><span class="p">.</span><span class="nf">css</span><span class="p">(</span><span class="s2">"div.tab_item_top_tags"</span><span class="p">).</span><span class="nf">text</span><span class="p">,</span>
      <span class="ss">url: </span><span class="n">item</span><span class="p">.</span><span class="nf">css</span><span class="p">(</span><span class="s2">"a.tab_item_overlay"</span><span class="p">).</span><span class="nf">collect</span><span class="p">{</span> <span class="o">|</span><span class="n">link</span><span class="o">|</span> <span class="n">link</span><span class="p">[</span><span class="s1">'href'</span><span class="p">]</span> <span class="p">}.</span><span class="nf">join</span><span class="p">,</span>
      <span class="p">}</span>
  <span class="k">end</span>

  <span class="n">return_array</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">i</span><span class="p">[</span><span class="ss">:url</span><span class="p">].</span><span class="nf">split</span><span class="p">(</span><span class="s2">"/"</span><span class="p">)</span> <span class="c1">#splits the link into individual elements between the /s</span>
    <span class="n">x</span><span class="p">.</span><span class="nf">pop</span> <span class="c1">#gets rid of the ?info at the end of the link</span>
    <span class="n">i</span><span class="p">[</span><span class="ss">:steam_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">last</span> <span class="c1">#sets the steam id to the end element of the link</span>
    <span class="n">i</span><span class="p">[</span><span class="ss">:url</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s2">"/"</span><span class="p">)</span> <span class="c1">#joins the url and saves it without the ?info</span>
  <span class="k">end</span>

  <span class="n">return_array</span>
<span class="k">end</span></code></pre></figure>

<p>…compared to a new <code>SteamAPIHandler</code> method that accomplishes the same thing:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">get_top_sellers</span>
  <span class="n">doc</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">"http://store.steampowered.com/api/featuredcategories/?cc=US"</span><span class="p">)</span> <span class="c1">#uses Open-URI to get the JSON file, ?cc=US for US currency</span>
  <span class="n">data_hash</span> <span class="o">=</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span> <span class="c1">#loads the JSON data</span>
  <span class="n">data_hash</span><span class="p">[</span><span class="s2">"top_sellers"</span><span class="p">][</span><span class="s2">"items"</span><span class="p">]</span> <span class="c1">#selects desired part of hash</span>
<span class="k">end</span></code></pre></figure>

<p>In practice, the <code>CLI</code>, upon loading, uses the <code>SteamAPIHandler</code> to acquire the top sellers and create <code>Game</code> objects from the data. It prints out the information on the screen, then, when the user selects a game to get more information on, the <code>CLI</code> uses the <code>SteamAPIHandler</code> to acquire additional data and print it out. I had a method that acquired the additional information as soon as the <code>CLI</code> loaded, but it caused additional load time as it had to make ten queries to the API in succession, as opposed to one at a time where the load time is much less noticeable.</p>

<p>Overall, it was a good learning experience and I accomplished what I had set out to do. You can see the source code for this project <a href="https://github.com/MitulMistry/steam-top-sellers-cli-gem">here on Github.</a></p>


    
  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    
      
        <li><a href="/" class="btn">Previous</a></li>
      
    

    
    
      <li><a href="/">1</a></li>
    

    
    

    
    
    

    

    
    

    
      <li><strong class="current-page">2</strong></li>
    

    
    
  </ul>
</div>

  
<div class="read-more">
  <div class="read-more-header">
    <a href="http://mitulmistry.github.io/" class="read-more-btn">About the Author</a>
  </div><!-- /.read-more-header -->
  <div class="read-more-content author-info">
    <h3>Mitul Mistry</h3>
    <div class="author-container">
      <img class="author-img" src="/images/avatar_mm.jpg" alt="Mitul Mistry" />
      <div class="author-bio">I’m Mitul Mistry, a full-stack developer and designer. Contact me here: MitulMistryDev@gmail.com</div>
    </div>
    <div class="author-share">
      <ul class="list-inline social-buttons">
        
          <li><a href="https://github.com/MitulMistry" target="_blank"><i class="fa fa-github fa-fw"></i></a></li>
        
          <li><a href="https://linkedin.com/in/mitulmistry" target="_blank"><i class="fa fa-linkedin fa-fw"></i></a></li>
        
      </ul>
      
        <a aria-label="Follow @MitulMistry on GitHub" data-style="mega" href="https://github.com/MitulMistry" class="github-button">Follow @MitulMistry</a>
      
      <br>
      
        <a href="https://twitter.com/mmystic" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @mmystic</a>
      
    </div>
  </div>
</div>


</div><!-- /#main -->

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">window.jQuery || document.write('<script type="text/javascript" src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script type="text/javascript" src="/assets/js/scripts.min.js"></script>
<script type="text/javascript" async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
<script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>



<!-- Asynchronous Google Analytics snippet -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6842596-6', 'auto');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>





<script type="text/javascript">
    sharing();
</script>



<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2016 Mitul Mistry</span>

  </footer>
</div><!-- /.footer-wrapper -->

</body>
</html>
